import { Callout, Tabs } from 'nextra/components';

# Server Events

<Callout type="warning">
These events are triggered by ox_core when an action occurs. You should not trigger them from other scripts.
</Callout>

## ox:savedPlayers

When players are saved to the database.  
<Callout type="info">
By default this event is triggered:
* Every 10 minutes.
* When the server is shutdown.
* When [`Ox.SaveAllPlayers`](/ox_core/Functions/server#oxsaveallplayers) is called.
* When the command `saveplayers` is used.
</Callout>
<Tabs items={['lua', 'TS']}>
  <Tabs.Tab>
    ```lua copy
    AddEventHandler('ox:savedPlayers', function(playersSaved)
        print(playersSaved)
    end)
    ```
  </Tabs.Tab>
  <Tabs.Tab>
  ```ts copy
  on('ox:savedPlayers', (playersSaved: number) => {
    console.log(playersSaved);
  })
  ```
  </Tabs.Tab>
</Tabs>
* playersSaved: `number`

## ox:setActiveGroup

When the active group of a character has changed.

<Tabs items={['lua', 'TS']}>
  <Tabs.Tab>
    ```lua copy
    AddEventHandler('ox:setActiveGroup', function(playerId, groupName)
        print(playerId, groupName)
    end)
    ```
  </Tabs.Tab>
  <Tabs.Tab>
  ```ts copy
  on('ox:setActiveGroup', (playerId: number, groupName: string) => {
    console.log(playersSaved);
  })
  ```
  </Tabs.Tab>
</Tabs>

* playerId: `number`
* groupName: `string`

## ox:setGroup

When a character is added or removed from a group.

<Tabs items={['lua', 'TS']}>
  <Tabs.Tab>
    ```lua copy
    AddEventHandler('ox:setGroup', function(playerId, groupName, grade)
        print(playerId, groupName, grade)
    end)
    ```
  </Tabs.Tab>
  <Tabs.Tab>
  ```ts copy
  on('ox:setGroup', (playerId: number, groupName: string, grade?: number) => {
    console.log(playerId, groupName, grade);
  })
  ```
  </Tabs.Tab>
</Tabs>

* playerId: `number`
* groupName: `string`
* grade?: `number`


## ox:licenseAdded

When a character receives a new license.

<Tabs items={['lua', 'TS']}>
  <Tabs.Tab>
    ```lua copy
    AddEventHandler('ox:licenseAdded', function(playerId, licenseName)
        print(playerId, licenseName)
    end)
    ```
  </Tabs.Tab>
  <Tabs.Tab>
  ```ts copy
  on('ox:licenseAdded', (playerId: number, licenseName: string) => {
    console.log(playerId, licenseName);
  })
  ```
  </Tabs.Tab>
</Tabs>

* playerId: `number`
* licenseName: `string`

## ox:licenseRemoved

When a character's license is removed.

<Tabs items={['lua', 'TS']}>
  <Tabs.Tab>
    ```lua copy
    AddEventHandler('ox:licenseRemoved', function(playerId, licenseName)
        print(playerId, licenseName)
    end)
    ```
  </Tabs.Tab>
  <Tabs.Tab>
  ```ts copy
  on('ox:licenseRemoved', (playerId: number, licenseName: string) => {
    console.log(playerId, licenseName);
  })
  ```
  </Tabs.Tab>
</Tabs>

* playerId: `number`
* licenseName: `string`

## ox:playerLogout

When a player logs out from their current character, crashes, or otherwise disconnects from the server.

<Tabs items={['lua', 'TS']}>
  <Tabs.Tab>
    ```lua copy
    AddEventHandler('ox:playerLogout', function(playerId, userId, charId)
        print(playerId, userId, charId)
    end)
    ```
  </Tabs.Tab>
  <Tabs.Tab>
  ```ts copy
  on('ox:playerLogout', (playerId: number, userId: number, charId: number) => {
    console.log(playerId, userId, charId);
  })
  ```
  </Tabs.Tab>
</Tabs>

* playerId: `number`
* userId: `number`
* charId: `number`

## ox:createdCharacter

When a player has created a new character.

<Tabs items={['lua', 'TS']}>
  <Tabs.Tab>
    ```lua copy
    AddEventHandler('ox:createdCharacter', function(playerId, userId, charId)
        print(playerId, userId, charId)
    end)
    ```
  </Tabs.Tab>
  <Tabs.Tab>
  ```ts copy
  on('ox:createdCharacter', (playerId: number, userId: number, charId: number) => {
    console.log(playerId, userId, charId);
  })
  ```
  </Tabs.Tab>
</Tabs>

* playerId: `number`
* userId: `number`
* charId: `number`

## ox:playerLoaded

When a player selects and loads a character.

<Tabs items={['lua', 'TS']}>
  <Tabs.Tab>
    ```lua copy
    AddEventHandler('ox:playerLoaded', function(playerId, userId, charId)
        print(playerId, userId, charId)
    end)
    ```
  </Tabs.Tab>
  <Tabs.Tab>
  ```ts copy
  on('ox:playerLoaded', (playerId: number, userId: number, charId: number) => {
    console.log(playerId, userId, charId);
  })
  ```
  </Tabs.Tab>
</Tabs>

* playerId: `number`
* userId: `number`
* charId: `number`

## ox:deletedCharacter

When a character is deleted.

<Tabs items={['lua', 'TS']}>
  <Tabs.Tab>
    ```lua copy
    AddEventHandler('ox:deletedCharacter', function(playerId, userId, charId)
        print(playerId, userId, charId)
    end)
    ```
  </Tabs.Tab>
  <Tabs.Tab>
  ```ts copy
  on('ox:deletedCharacter', (playerId: number, userId: number, charId: number) => {
    console.log(playerId, userId, charId);
  })
  ```
  </Tabs.Tab>
</Tabs>

* playerId: `number`
* userId: `number`
* charId: `number`

## ox:savedVehicles

When vehicles are saved to the database.

<Tabs items={['lua', 'TS']}>
  <Tabs.Tab>
    ```lua copy
    AddEventHandler('ox:savedVehicles', function(vehiclesSaved)
        print(vehiclesSaved)
    end)
    ```
  </Tabs.Tab>
  <Tabs.Tab>
  ```ts copy
  on('ox:savedVehicles', (vehiclesSaved: number) => {
    console.log(vehiclesSaved);
  })
  ```
  </Tabs.Tab>
</Tabs>

* vehiclesSaved: `number`

## ox:spawnedVehicle

When an [`OxVehicle`](/ox_core/Classes/Server/OxVehicle) has spawned.

<Tabs items={['lua', 'TS']}>
  <Tabs.Tab>
    ```lua copy
    AddEventHandler('ox:spawnedVehicle', function(entityId, id)
        print(entityId, id)
    end)
    ```
  </Tabs.Tab>
  <Tabs.Tab>
  ```ts copy
  on('ox:spawnedVehicle', (entityId: number, id: number) => {
    console.log(entityId, id);
  })
  ```
  </Tabs.Tab>
</Tabs>

* entityId: `number`
* id: `number`

## ox:despawnVehicle

Before an [`OxVehicle`](/ox_core/Classes/Server/OxVehicle) gets despawned.

<Tabs items={['lua', 'TS']}>
  <Tabs.Tab>
    ```lua copy
    AddEventHandler('ox:despawnVehicle', function(entityId, id)
        print(entityId, id)
    end)
    ```
  </Tabs.Tab>
  <Tabs.Tab>
  ```ts copy
  on('ox:despawnVehicle', (entityId: number, id: number) => {
    console.log(entityId, id);
  })
  ```
  </Tabs.Tab>
</Tabs>

* entityId: `number`
* id: `number`

## ox:updatedBalance

When an account's balance is updated.

```lua
function(data: object)
```
* data `object`
  * accountId: `number`
  * amount: `number`
  * action: `'add' | 'remove'`


## ox:transferredMoney

When an account's money is transferred.

```lua
function(data: object)
```
* data `object`
  * fromAccountId: `number`
  * toAccountId: `number`
  * amount: `number`

## ox:depositedMoney

When money is deposited into an account.

```lua
function(data: object)
```
* data `object`
  * playerId: `number`
  * accountId: `number`
  * amount: `number`

## ox:withdrewMoney

When money is withdrawn from an account.

```lua
function(data: object)
```
* data `object`
  * playerId: `number`
  * accountId: `number`
  * amount: `number`

## ox:invoicePaid

When an invoice is paid.

```lua
function(data: object)
```
* data `object`
  * amount: `number`
  * payerId: `number`
  * fromAccount: `number`
  * toAccount: `number`